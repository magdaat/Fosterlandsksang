<!DOCTYPE html>
<html lang="sv">
   <head>
      <meta charset="UTF-8"><!-- teckenkodning -->
      <meta name="viewport" content="width=device-width, initial-scale=1"><!-- får det att fungera på olika skärmar -->
      <title>Sånghäfte</title><!-- titel på sidan, syns i webbläsare -->
     <!-- Externa CSS-filer -->
     <!-- Bootstrap 5.3.2 -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" 
       rel="stylesheet" 
       integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" 
       crossorigin="anonymous"/>
     <!-- egen CSS-fil -->
     <link rel="stylesheet" href="assets/css/main.css"/>
   </head>
   <body class="page-sanghafte">
      <header>
         <h1>
            Digitaliserad version av "Fosterländsk sång vid Götha Canals öpnande"
         </h1>
      </header>
      <nav><!-- Navigeringsmeny -->
         <a href="index.html">Om projektet</a> | 
         <a href="sanghafte.html">Sånghäfte</a> | 
         <a href="sangtext.html">Sångtext</a> | 
         <a href="historia.html">Historia</a> | 
         <a href="begrepp.html">Begrepp</a>
      </nav>
      <div class="container-fluid">
         <div id="myCarousel" class="carousel slide" data-bs-interval="false"> <!-- Skapar en karusell-komponent från bootstrap -->
            <div class="carousel-inner"> <!-- Innehåller själva slidesen. -->
               <!-- Slide 1 --> <!-- Ett Bootstrap-bildspel som visar digitaliserade sidor ur sånghäftet. Bilderna har img-fluid och w-50, vilket betyder att de är responsiva och visas i halva fönstrets bredd. -->
               <div class="carousel-item active"> <!-- Detta är första bilden i karusellen. Active = denna visas först. -->
                  <div class="carousel-number">1 / 8</div> <!-- Sidnummer/sidräknare -->
                  <img src="assets/img/documents/B1-Framsida-omslag.jpeg"
                     class="d-block mx-auto border border-dark img-fluid custom-size zoomable"
                     alt="Framsida omslag"> <!-- Blockelement så att bilden kan centreras, custom = klass i CSS som begränsar bildens maxbredd, zoom-effekt -->
                  <div class="carousel-caption-custom">Bild på sånghäftets framsida.</div> <!-- Bildtext -->
               </div> 
               <!-- Slide 2 -->
               <div class="carousel-item">
                  <div class="carousel-number">2 / 8</div>
                  <img src="assets/img/documents/B2-Insida-omslag-och-titelblad.jpeg"
                     class="d-block mx-auto border border-dark img-fluid custom-size zoomable"
                     alt="Insida omslag och titelblad">
                  <div class="carousel-caption-custom">Bild på sånghäftets första uppslag som visar insida omslag och titelblad.</div>
               </div>

               <!-- Slide 3 -->
               <div class="carousel-item">
                  <div class="carousel-number">3 / 8</div>
                  <img src="assets/img/documents/B3-Blankt-blad-och-sangens-forsta-sida.jpeg"
                     class="d-block mx-auto border border-dark img-fluid custom-size zoomable"
                     alt="Blankt blad och sångens första sida">
                  <div class="carousel-caption-custom">Bild på sånghäftets andra uppslag som visar ett blankt blad och sångens första sida.</div>
               </div>
               <!-- Slide 4 -->
               <div class="carousel-item">
                  <div class="carousel-number">4 / 8</div>
                  <img src="assets/img/documents/B4-Sangtext-sida-tva-tre.jpeg"
                     class="d-block mx-auto border border-dark img-fluid custom-size zoomable"
                     alt="Sångtext sida 2–3">
                  <div class="carousel-caption-custom">Bild på sånghäftets tredje uppslag som visar sångtextens andra och tredje sida.</div>
               </div>
               <!-- Slide 5 -->
               <div class="carousel-item">
                  <div class="carousel-number">5 / 8</div>
                  <img src="assets/img/documents/B5-Sangtext-sida-fyra-fem.jpeg"
                     class="d-block mx-auto border border-dark img-fluid custom-size zoomable"
                     alt="Sångtext sida 4–5">                  
                 <div class="carousel-caption-custom">Bild på sånghäftets fjärde uppslag som visar sångtextens fjärde och femte sida.</div>
               </div>
               <!-- Slide 6 -->
               <div class="carousel-item">
                  <div class="carousel-number">6 / 8</div>
                  <img src="assets/img/documents/B6-Sangtext-sida-sex-sju.jpeg"
                     class="d-block mx-auto border border-dark img-fluid custom-size zoomable"
                     alt="Sångtext sida 6–7">                  
                 <div class="carousel-caption-custom">Bild på sånghäftets femte uppslag som visar sångtextens sjätte och sjunde sida.</div>
               </div>
               <!-- Slide 7 -->
               <div class="carousel-item">
                  <div class="carousel-number">7 / 8</div>
                  <img src="assets/img/documents/B7-Attonde-sidan-sangtext-och-en-blank-sida.jpeg"
                     class="d-block mx-auto border border-dark img-fluid custom-size zoomable"
                     alt="Åttonde sidan sångtext och en blank sida">                  
                 <div class="carousel-caption-custom">Bild på sånghäftets sista uppslag som visar sångtextens åttonde sida och insida omslag.</div>
               </div>
               <!-- Slide 8 -->
               <div class="carousel-item">
                  <div class="carousel-number">8 / 8</div>
                  <img src="assets/img/documents/B8-Baksida-omslag.jpeg"
                     class="d-block mx-auto border border-dark img-fluid custom-size zoomable"
                     alt="Baksida omslag">             
                  <div class="carousel-caption-custom">Bild på sånghäftets baksida.</div>
               </div>
            </div>
            <!-- Navigationspilar -->
            <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel"
               data-bs-slide="prev">
               <span class="carousel-control-prev-icon" aria-hidden="true"></span>
               <span class="visually-hidden">Föregående</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#myCarousel"
               data-bs-slide="next">
               <span class="carousel-control-next-icon" aria-hidden="true"></span>
               <span class="visually-hidden">Nästa</span>
            </button>
         </div>
      </div>
     <footer><!-- innehåller upphovsrättsinformation och länk till licens -->
         <div class="footer-row">
            <div class="footer-content">
               <div class="copyright_logos">
                  <a href="https://creativecommons.org/licenses/by/4.0/legalcode">
                     <img src="assets/img/logos/cc.svg" class="copyright_logo" alt="Creative Commons License">
                     <img src="assets/img/logos/by.svg" class="copyright_logo" alt="Attribution 4.0 International">
                  </a>
               </div>
               <div class="copyright_text">
                  2025 Marie Gyll, Jessica Hultengren, Susanne Landén och Magdalena af Trolle.
               </div>
            </div>
         </div>
      </footer>
      <!-- Bootstrap Bundle -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
      <!-- JavaScript för zoom och pan -->
     <script>
  document.querySelectorAll('.zoomable').forEach(img => {
    let scale = 1;
    let translate = { x: 0, y: 0 };
    let isPanning = false;
    let start = { x: 0, y: 0 };
    let zoomedIn = false;

    function updateTransform() {
      img.style.transform = `scale(${scale}) translate(${translate.x / scale}px, ${translate.y / scale}px)`;
    }

    // Dubbelklick för att zooma in där man klickar
    img.addEventListener('click', e => {
      const rect = img.getBoundingClientRect();
      const offsetX = e.clientX - rect.left;
      const offsetY = e.clientY - rect.top;

      if (!zoomedIn) {
        scale = 2;
        zoomedIn = true;
        img.style.cursor = 'move';
        translate.x = -(offsetX - rect.width / 2);
        translate.y = -(offsetY - rect.height / 2);
      } else {
        scale = 1;
        translate = { x: 0, y: 0 };
        zoomedIn = false;
        img.style.cursor = 'zoom-in';
      }
      updateTransform();
    });

    // Panning med mus
    img.addEventListener('mousedown', e => {
      if (!zoomedIn) return;
      isPanning = true;
      start.x = e.clientX - translate.x;
      start.y = e.clientY - translate.y;
    });

    img.addEventListener('mouseup', () => isPanning = false);
    img.addEventListener('mouseleave', () => isPanning = false);

    img.addEventListener('mousemove', e => {
      if (!isPanning || !zoomedIn) return;
      translate.x = e.clientX - start.x;
      translate.y = e.clientY - start.y;
      updateTransform();
    });

    // Touch-stöd (pinch och drag)
    let initialDistance = 0;
    let initialScale = 1;

    img.addEventListener('touchstart', e => {
      if (e.touches.length === 2) {
        initialDistance = getDistance(e.touches[0], e.touches[1]);
        initialScale = scale;
      } else if (e.touches.length === 1 && zoomedIn) {
        isPanning = true;
        start.x = e.touches[0].clientX - translate.x;
        start.y = e.touches[0].clientY - translate.y;
      }
    });

    img.addEventListener('touchmove', e => {
      e.preventDefault();
      if (e.touches.length === 2) {
        const newDistance = getDistance(e.touches[0], e.touches[1]);
        scale = Math.min(Math.max(1, initialScale * (newDistance / initialDistance)), 5);
        zoomedIn = scale > 1;
        updateTransform();
      } else if (e.touches.length === 1 && isPanning && zoomedIn) {
        translate.x = e.touches[0].clientX - start.x;
        translate.y = e.touches[0].clientY - start.y;
        updateTransform();
      }
    }, { passive: false });

    img.addEventListener('touchend', e => {
      if (e.touches.length < 2) isPanning = false;
    });

    function getDistance(t1, t2) {
      const dx = t1.clientX - t2.clientX;
      const dy = t1.clientY - t2.clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }
  });
</script>     
   </body>
</html>
